---
import type { InferGetStaticPropsType } from 'astro'
import Page from 'virtual:starlight-blog/components/Page'
import PostCount from 'virtual:starlight-blog/components/PostCount'
import Posts from 'virtual:starlight-blog/components/Posts'

import { getAuthorsStaticPaths } from '../libs/authors'
import { getPageProps } from '../libs/page'

export const prerender = true

export function getStaticPaths() {
  return getAuthorsStaticPaths()
}

type Props = InferGetStaticPropsType<typeof getStaticPaths>

const { author, entries, locale } = Astro.props

const pageProps = getPageProps(author.name)
---

<Page {...pageProps}>
  <PostCount
    >{
      Astro.locals.t('starlightBlog.authors.count', {
        interpolation: { escapeValue: false },
        count: entries.length,
        author: author.name,
      })
    }</PostCount
  >
  <Posts {entries} {locale} />
</Page>
